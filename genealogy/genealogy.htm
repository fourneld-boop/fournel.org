<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Fournel Genealogy</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description"
        content="Généalogie de la famille Fournel en France et au Canada depuis le XVIIe siècle.">

  <style>
    :root{
      --bg:#0a0f1f;
      --card:rgba(255,255,255,0.06);
      --card2:rgba(255,255,255,0.04);
      --border:rgba(255,255,255,0.11);
      --text:#e8ecff;
      --muted:#aab2e6;
      --accent:#8fd3ff;
      --accent2:#a855ff;
      --warn:#ffd27a;
      --shadow:0 22px 60px rgba(0,0,0,.65);
      --radius:14px;
      --max:1100px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui,-apple-system,Segoe UI,sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.7;
    }
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}

    header{
      position:sticky;top:0;z-index:10;
      backdrop-filter: blur(18px);
      background: rgba(10,15,31,0.92);
      border-bottom:1px solid rgba(255,255,255,0.08);
    }
    nav{
      max-width: var(--max);
      margin:0 auto;
      padding: .85rem 1.25rem;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:1rem;
      flex-wrap:wrap;
    }
    nav strong{
      letter-spacing:.02em;
      display:flex;
      align-items:baseline;
      gap:.65rem;
    }
    nav strong span{
      color: var(--muted);
      font-weight:500;
      font-size:.85rem;
    }
    .nav-links{
      display:flex;
      gap:.55rem;
      flex-wrap:wrap;
      align-items:center;
      font-size:.9rem;
    }
    .nav-links a{
      color: var(--muted);
      padding:.25rem .7rem;
      border-radius:999px;
      border:1px solid transparent;
      transition:.18s;
    }
    .nav-links a:hover{
      color:var(--text);
      border-color: rgba(143,211,255,0.18);
      background: rgba(255,255,255,0.04);
      text-decoration:none;
      transform: translateY(-1px);
    }
    .nav-links a.active{
      color:var(--text);
      border-color: rgba(143,211,255,0.22);
      background: rgba(255,255,255,0.06);
    }

    main{
      max-width: 920px;
      margin: 0 auto;
      padding: 2.2rem 1.25rem 4rem;
    }

    h1{
      text-align:center;
      font-size: clamp(2.0rem, 2.2vw + 1.1rem, 2.6rem);
      margin: 0 0 .35rem;
    }
    .subtitle{
      text-align:center;
      color: var(--muted);
      margin: 0 0 1.25rem;
      font-style: italic;
    }

    .hero-img{
      max-width: 100%;
      display:block;
      margin: 1.35rem auto 1.1rem;
    }

    .controls{
      margin: 1.2rem 0 1.2rem;
      border-radius: var(--radius);
      background: rgba(255,255,255,0.05);
      border:1px solid rgba(255,255,255,0.10);
      box-shadow: var(--shadow);
      padding: .9rem .95rem;
    }

    .search-row{
      display:flex;
      gap:.7rem;
      align-items:center;
      flex-wrap:wrap;
    }
    .search{
      display:flex;
      align-items:center;
      gap:.55rem;
      padding:.45rem .7rem;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.18);
      flex: 1 1 320px;
      min-width: 260px;
    }
    .search input{
      width:100%;
      background:transparent;
      border:none;
      outline:none;
      color: var(--text);
      font-size: .95rem;
    }
    .search input::placeholder{color: rgba(170,178,230,0.85)}
    .btn{
      cursor:pointer;
      border:none;
      border-radius:999px;
      padding:.45rem .8rem;
      background: rgba(143,211,255,0.12);
      color: var(--text);
      border:1px solid rgba(143,211,255,0.25);
      transition:.18s;
      font-size:.9rem;
    }
    .btn:hover{
      transform: translateY(-1px);
      background: rgba(143,211,255,0.18);
      border-color: rgba(143,211,255,0.40);
    }

    .chips{
      display:flex;
      flex-wrap:wrap;
      gap:.45rem;
      margin-top:.75rem;
    }
    .chip{
      cursor:pointer;
      user-select:none;
      padding:.28rem .65rem;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.14);
      color: var(--muted);
      font-size:.86rem;
      transition:.16s;
    }
    .chip:hover{
      transform: translateY(-1px);
      border-color: rgba(143,211,255,0.28);
      color: var(--text);
    }
    .chip.active{
      color: var(--text);
      border-color: rgba(143,211,255,0.50);
      background: rgba(143,211,255,0.10);
    }

    .hint{
      margin-top:.75rem;
      color: rgba(170,178,230,0.92);
      font-size:.9rem;
      line-height:1.55;
    }

    .section{
      margin-bottom: 1.15rem;
    }
    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.25rem 1.25rem 1.1rem;
      box-shadow: 0 14px 40px rgba(0,0,0,.35);
      position:relative;
      overflow:hidden;
    }
    .card::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(circle at 10% 15%, rgba(143,211,255,.12), transparent 45%),
        radial-gradient(circle at 90% 80%, rgba(168,85,255,.10), transparent 48%);
      pointer-events:none;
    }
    .card h2{
      margin: 0 0 .55rem;
      color: var(--warn);
      position:relative;
    }
    .gene-line{margin: .45rem 0; position:relative}
    .note{
      color: var(--muted);
      font-size: 0.92rem;
      margin-top: .9rem;
      position:relative;
    }

    /* Optional highlighting for matches */
    mark{
      background: rgba(255,210,122,0.22);
      color: var(--text);
      padding: 0 .2em;
      border-radius: .3em;
    }

    /* “Surname” styling (does not change text) */
    .surname{
      color: #dff6ff;
      font-weight: 650;
      text-decoration: none;
    }

    .hidden{
      display:none !important;
    }

    /* --- Migration map --- */
    .map-wrap{
      margin-top:.75rem;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.18);
      overflow:hidden;
    }
    .map-top{
      display:flex;
      justify-content:space-between;
      gap:1rem;
      align-items:baseline;
      padding:.75rem .9rem;
      border-bottom:1px solid rgba(255,255,255,0.08);
      background: rgba(255,255,255,0.03);
    }
    .map-top .meta{color:var(--muted);font-size:.88rem}
    .map-legend{
      display:flex;flex-wrap:wrap;gap:.55rem;
      padding:.75rem .9rem;
      color:var(--muted);
      font-size:.88rem;
    }
    .legend-dot{
      width:10px;height:10px;border-radius:50%;
      display:inline-block;margin-right:.35rem;
      box-shadow:0 0 14px rgba(143,211,255,0.40);
      vertical-align:middle;
    }
    .legend-fr{background: rgba(255,210,122,0.95);}
    .legend-ca{background: rgba(143,211,255,0.95);}
    .legend-route{background: rgba(168,85,255,0.95);}

    .map-svg{
      width:100%;
      height:auto;
      display:block;
    }
    .pulse{
      animation: pulse 2.6s ease-in-out infinite;
      transform-origin:center;
    }
    @keyframes pulse{
      0%,100%{transform:scale(1); opacity:0.95}
      50%{transform:scale(1.18); opacity:0.55}
    }

    .route{
      stroke: rgba(168,85,255,0.85);
      stroke-width: 3.2;
      fill: none;
      stroke-linecap: round;
      stroke-dasharray: 10 10;
      animation: dash 9s linear infinite;
      filter: drop-shadow(0 0 10px rgba(168,85,255,0.35));
    }
    @keyframes dash{
      from{stroke-dashoffset: 0;}
      to{stroke-dashoffset: -200;}
    }

    .route-glow{
      stroke: rgba(143,211,255,0.18);
      stroke-width: 9;
      fill:none;
      stroke-linecap:round;
      filter: blur(0.5px);
    }

    .label{
      font-size: 14px;
      fill: rgba(232,236,255,0.92);
      font-weight: 650;
      letter-spacing: .02em;
    }
    .subLabel{
      font-size: 12px;
      fill: rgba(170,178,230,0.92);
    }

    footer{
      text-align:center;
      padding: 1.5rem 1rem;
      font-size: .85rem;
      color: var(--muted);
      border-top: 1px solid rgba(255,255,255,0.08);
      background: rgba(10,15,31,0.65);
    }
  </style>
</head>

<body>

<header>
  <nav>
    <strong>fournel.org <span>Généalogie / Genealogy</span></strong>
    <div class="nav-links">
      <a href="../index.html">Home</a>
      <a href="../history.htm">History</a>
      <a href="../tech.htm">Technology</a>
      <a href="../future.htm">Future</a>
      <a href="../religion.htm">Religion</a>
      <a href="../science.htm">Science</a>
      <a href="../about.htm">About</a>
      <a class="active" href="genealogy.htm">Genealogy</a>
    </div>
  </nav>
</header>

<main>

  <h1>La Généalogie des <span class="surname">Fournel</span></h1>
  <p class="subtitle">France → Canada · depuis le XVIIᵉ siècle</p>

  <!-- Keep your existing image path if it exists -->
  <img class="hero-img" src="images/flow10.gif" alt="Genealogy Banner">

  <!-- Search + filters -->
  <section class="controls" aria-label="Search and filter by surname">
    <div class="search-row">
      <div class="search" role="search" aria-label="Surname search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="rgba(232,236,255,0.9)" stroke-width="1.6"/>
          <path d="M16.5 16.5 21 21" stroke="rgba(232,236,255,0.9)" stroke-width="1.6" stroke-linecap="round"/>
        </svg>
        <input id="q" type="search" placeholder="Search by surname / Rechercher un patronyme… (ex: Fournel, Prévost, Hubinet)" />
      </div>
      <button class="btn" id="clearBtn" type="button">Clear</button>
    </div>

    <div class="chips" id="chips" aria-label="Quick surname filters">
      <!-- chips auto-generated by JS from .surname elements; fallback defaults below -->
      <span class="chip active" data-chip="__all__">All</span>
      <span class="chip" data-chip="Fournel">Fournel</span>
      <span class="chip" data-chip="Prévost">Prévost</span>
      <span class="chip" data-chip="Hubinet">Hubinet</span>
      <span class="chip" data-chip="Barbel">Barbel</span>
    </div>

    <div class="hint">
      Tip: you can type any surname (or place) and the page will narrow to matching sections.
      Cliquez un filtre rapide pour isoler une branche.
    </div>
  </section>

  <!-- NEW: France → Canada migration map -->
  <section class="section card" data-block>
    <h2>Migration : France → Canada</h2>
    <p class="gene-line">
      Une visualisation simple (et stylisée) de la traversée Atlantique associée aux premières générations.
      <span style="color:var(--muted)">(Carte illustrative — pas une carte géographique précise.)</span>
    </p>

    <div class="map-wrap" aria-label="France to Canada migration map">
      <div class="map-top">
        <div class="meta"><strong>Route</strong> · Rouen / Normandie → Québec (Nouvelle-France)</div>
        <div class="meta">XVIIᵉ siècle</div>
      </div>

      <!-- Inline SVG: simple ocean panel + two landmasses + animated arc -->
      <svg class="map-svg" viewBox="0 0 1000 460" role="img" aria-label="France to Canada migration route (illustrative)">
        <!-- background -->
        <defs>
          <linearGradient id="ocean" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0" stop-color="rgba(143,211,255,0.12)"/>
            <stop offset="1" stop-color="rgba(0,0,0,0.22)"/>
          </linearGradient>
          <linearGradient id="land" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0" stop-color="rgba(255,255,255,0.10)"/>
            <stop offset="1" stop-color="rgba(255,255,255,0.04)"/>
          </linearGradient>
          <filter id="softGlow">
            <feGaussianBlur stdDeviation="3" result="blur"/>
            <feMerge>
              <feMergeNode in="blur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>

        <rect x="0" y="0" width="1000" height="460" fill="url(#ocean)"/>

        <!-- subtle stars -->
        <g opacity="0.35">
          <circle cx="90" cy="65" r="2" fill="rgba(232,236,255,0.9)"/>
          <circle cx="160" cy="110" r="1.5" fill="rgba(232,236,255,0.7)"/>
          <circle cx="310" cy="70" r="1.4" fill="rgba(232,236,255,0.7)"/>
          <circle cx="760" cy="75" r="1.7" fill="rgba(232,236,255,0.75)"/>
          <circle cx="870" cy="130" r="1.4" fill="rgba(232,236,255,0.65)"/>
          <circle cx="640" cy="55" r="1.4" fill="rgba(232,236,255,0.65)"/>
        </g>

        <!-- landmass: Europe (stylized) -->
        <path d="M730,170
                 C780,120 880,120 910,165
                 C940,205 925,250 890,275
                 C860,298 820,300 790,285
                 C760,270 725,235 730,170 Z"
              fill="url(#land)" stroke="rgba(255,255,255,0.10)" />

        <!-- landmass: North America (stylized) -->
        <path d="M70,170
                 C120,120 210,110 270,140
                 C330,170 350,220 330,270
                 C310,320 250,345 200,335
                 C150,325 100,290 78,240
                 C60,205 55,195 70,170 Z"
              fill="url(#land)" stroke="rgba(255,255,255,0.10)" />

        <!-- Route glow + route -->
        <path class="route-glow" d="M840,220 C690,90 430,80 240,220" />
        <path class="route" d="M840,220 C690,90 430,80 240,220" />

        <!-- Start marker: France -->
        <g filter="url(#softGlow)">
          <circle cx="840" cy="220" r="9" fill="rgba(255,210,122,0.95)"/>
          <circle class="pulse" cx="840" cy="220" r="16" fill="rgba(255,210,122,0.18)"/>
        </g>
        <text x="855" y="210" class="label">France</text>
        <text x="855" y="230" class="subLabel">Rouen / Normandie</text>

        <!-- End marker: Canada -->
        <g filter="url(#softGlow)">
          <circle cx="240" cy="220" r="9" fill="rgba(143,211,255,0.95)"/>
          <circle class="pulse" cx="240" cy="220" r="16" fill="rgba(143,211,255,0.18)"/>
        </g>
        <text x="95" y="210" class="label">Canada</text>
        <text x="95" y="230" class="subLabel">Québec / Nouvelle-France</text>

        <!-- small ship icon (simple) -->
        <g transform="translate(520 150)" opacity="0.85" filter="url(#softGlow)">
          <path d="M0,60 L45,60 L36,75 L9,75 Z" fill="rgba(232,236,255,0.35)" stroke="rgba(232,236,255,0.25)"/>
          <path d="M22,10 L22,60" stroke="rgba(232,236,255,0.45)" stroke-width="3" stroke-linecap="round"/>
          <path d="M22,16 C10,24 10,44 22,52 C34,44 34,24 22,16 Z"
                fill="rgba(168,85,255,0.14)" stroke="rgba(168,85,255,0.30)"/>
        </g>
      </svg>

      <div class="map-legend" aria-label="Legend">
        <div><span class="legend-dot legend-fr"></span>Point de départ (France)</div>
        <div><span class="legend-dot legend-ca"></span>Point d’arrivée (Canada)</div>
        <div><span class="legend-dot legend-route"></span>Route transatlantique</div>
      </div>
    </div>

    <p class="note">
      Vous pouvez ajuster les libellés (ex. ajouter “Lozère / Fournels” comme origine du nom, ou Québec/Terrebonne comme points d’établissement)
      sans changer le style.
    </p>
  </section>

  <!-- =========================
       YOUR EXISTING DATA SECTIONS
       (Kept as content blocks — only lightly wrapped for style)
       ========================= -->

  <section class="section card" data-block>
    <h2>Origine du nom</h2>
    <p class="gene-line">
      <span class="surname">FOURNEL</span> : Fourneaux, Fourneau, Fornel, Fournelle, Furnius,
      Forneli, Fornerius, De Furnellis.
    </p>
    <p class="gene-line">
      <em>« Qui a un fournil ou le four banal »</em> — Héritage du Monde.
    </p>
    <p class="gene-line">
      <strong>Château de Fournels</strong>, Lozère, sud de la France (XVe siècle).
    </p>
  </section>

  <section class="section card" data-block>
    <h2>I — Nicolas <span class="surname">Fournel</span> (b. 1620)</h2>
    <p class="gene-line">
      Marié en 1640 à Rouen, France, à Charlotte <span class="surname">Prévost</span>.
    </p>
    <p class="gene-line">
      <em>De St-Sauveur, évêché de Rouen</em>
    </p>
  </section>

  <section class="section card" data-block>
    <h2>II — Jacques I <span class="surname">Fournel</span> (1645–1707)</h2>
    <p class="gene-line">
      Arrivé au Canada. Cultivateur. Recensement de 1681 : 18 arpents, 2 bêtes.
    </p>
    <p class="gene-line">
      Marié à Louise <span class="surname">Hubinet</span> (Fille du Roi).
    </p>
  </section>

  <section class="section card" data-block>
    <h2>III–V — Expansion canadienne</h2>
    <p class="gene-line">
      Multiples lignées établies à Québec, Terrebonne, Pointe-aux-Trembles.
    </p>
    <p class="gene-line">
      Figures notables : <span class="surname">Marie-Anne Barbel</span>, femme d’affaires du XVIIIᵉ siècle.
    </p>
    <p class="note">
      Texte original conservé en français tel que dans les sources généalogiques.
    </p>
  </section>

  <section class="section card" data-block>
    <h2>Notes &amp; références</h2>
    <p class="gene-line">© Dictionnaire généalogique des familles canadiennes</p>
    <p class="gene-line">Abréviations : b = born, s = died, m = married</p>
  </section>

</main>

<footer>
  © <span id="year"></span> fournel.org · Genealogy Archive
</footer>

<script>
  document.getElementById("year").textContent = new Date().getFullYear();

  const q = document.getElementById("q");
  const clearBtn = document.getElementById("clearBtn");
  const chipsWrap = document.getElementById("chips");
  const blocks = Array.from(document.querySelectorAll("[data-block]"));

  // Normalize accents for search (PréVost == Prevost)
  function normalize(str){
    return (str || "")
      .toLowerCase()
      .normalize("NFD")
      .replace(/[\u0300-\u036f]/g, "");
  }

  function setActiveChip(value){
    chipsWrap.querySelectorAll(".chip").forEach(c => {
      c.classList.toggle("active", c.dataset.chip === value);
    });
  }

  function applyFilter(){
    const query = normalize(q.value.trim());
    const activeChip = chipsWrap.querySelector(".chip.active")?.dataset.chip || "__all__";
    const chipQuery = (activeChip === "__all__") ? "" : normalize(activeChip);

    blocks.forEach(block => {
      const text = normalize(block.textContent);
      const okChip = !chipQuery || text.includes(chipQuery);
      const okQuery = !query || text.includes(query);
      block.classList.toggle("hidden", !(okChip && okQuery));
    });
  }

  // Chip clicks
  chipsWrap.addEventListener("click", (e) => {
    const chip = e.target.closest(".chip");
    if(!chip) return;
    const val = chip.dataset.chip;
    setActiveChip(val);
    // If chip is a surname, optionally fill the search box for clarity
    if(val !== "__all__"){
      q.value = val;
    } else {
      q.value = "";
    }
    applyFilter();
  });

  // Search input
  q.addEventListener("input", () => {
    // If user types, set chip to All
    setActiveChip("__all__");
    applyFilter();
  });

  // Clear
  clearBtn.addEventListener("click", () => {
    q.value = "";
    setActiveChip("__all__");
    applyFilter();
    q.focus();
  });

  // Optional: Auto-generate chips from any .surname spans (keeps your manual chips too)
  (function autoChips(){
    const existing = new Set(Array.from(chipsWrap.querySelectorAll(".chip")).map(c => c.dataset.chip));
    const names = new Set(Array.from(document.querySelectorAll(".surname")).map(s => (s.textContent || "").trim()).filter(Boolean));

    // Don’t explode chips: keep it reasonable
    const sorted = Array.from(names).sort((a,b) => a.localeCompare(b, "fr", {sensitivity:"base"})).slice(0, 20);

    for(const name of sorted){
      if(existing.has(name) || name.length < 2) continue;
      const chip = document.createElement("span");
      chip.className = "chip";
      chip.dataset.chip = name;
      chip.textContent = name;
      chipsWrap.appendChild(chip);
      existing.add(name);
    }
  })();

  // Initial render
  applyFilter();
</script>

</body>
</html>
